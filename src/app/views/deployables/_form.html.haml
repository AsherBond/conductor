- if @catalog_entry.errors.any?
  = render 'layouts/error_messages', :object => @catalog_entry
%fieldset
  - if params[:edit_xml]
    = form.fields_for :deployable, @catalog_entry.deployable do |deployable_fields|
      %p
        = deployable_fields.label :xml, t('.deployable_xml')
        = deployable_fields.text_area :xml, :class => 'long'
  - else
    %p
      = form.label :catalog_id, t('catalog_entries.form.catalog')
      = @catalog.name
      .clear
    = form.fields_for :deployable, @catalog_entry.deployable do |deployable_fields|
      %p
        = deployable_fields.label :name, t('catalog_entries.index.name')
        = deployable_fields.text_field :name, :class => 'em long'
      %p
        = deployable_fields.label :description, t('.description')
        = deployable_fields.text_area :description, :class => 'long'
      %p
        = deployable_fields.label :xml, t('.deployable_xml')
        = link_to t("catalog_entries.properties.edit_deployable_xml"), edit_catalog_deployable_path(@catalog_entry.catalog.id, @catalog_entry.id, :edit_xml=>true)

%fieldset.options
  = link_to t('cancel'), catalog_path(@catalog), :class => 'button danger'
  = submit_tag t('save'), :name => 'save', :class => 'button', :id => 'save_button'
