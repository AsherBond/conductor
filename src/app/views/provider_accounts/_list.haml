%section.content-section.provider_accounts
  %header
    %h2 Provider Accounts
    %span.label.badge.dark.count= @accounts.length

  .content
    - form_header = capture_haml do
      = restful_submit_tag "Delete", "destroy", multi_destroy_provider_accounts_path, 'DELETE',
        :id => 'delete_button', :class => 'button danger'

    = filter_table(@header, @accounts, :form_header => form_header) do |account|
      %tr{:class => cycle('nostripe','stripe')}
        %td
          - selected = params[:select] == 'all'
          = check_box_tag "accounts_selected[]", account.id, selected, :id => "account_checkbox_#{account.id}"
        %td= link_to account.name, provider_account_path(account)
        %td= account.credentials_hash['username']
        %td= account.provider.name
        %td= account.provider.provider_type.name
        %td= number_to_percentage account.quota.percentage_used, :precision => 0
        %td= account.quota.maximum_running_instances or 'unlimited'
