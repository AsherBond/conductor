<ul id="providers">
  <% curId = params[:id].to_i %>
  <% @providers.each { |provider| %>
    <%#Note that this is a temporary way to selected proper list item for demo, and is not expected to stay this way%>
    <% if controller.controller_name == "provider" && provider.id == curId
      selected_provider = "selected"
    else
      selected_provider = ""
    end %>
    <li><%= link_to  provider.name,
         {:controller => "provider", :action => "show", :id => provider},
         :class => "providername #{selected_provider}"%>
      <% provider.portal_pools.each { |pool| %>
      <ul id="portal_pool-<%=provider.id%>">
        <% if controller.controller_name == "portal_pool" && pool.id == curId
          selected_pool = "selected"
        else selected_pool = ""
        end %>
        <li><%= link_to  pool.name,
            {:controller => "portal_pool", :action => "show", :id => pool},
             :class => "poolname #{selected_pool}" %></li>
      </ul>
     <% } %>
   </li>
  <% } %>
</ul>
<%=link_to "Add a provider", {:controller => "provider", :action => "new"}, :class => "actionlink" %>

<%=link_to "Add a pool",     {:controller => "portal_pool", :action => "new"}, :class => "actionlink" %>
